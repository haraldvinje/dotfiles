#!/bin/bash

# Function to set AWS_PROFILE using fzf
set-aws-profile() {
  local aws_config_file="$HOME/.aws/config"

  # Get all profile names from AWS config file
  profile_names=($(aws configure list-profiles))
  
  # Use fzf for profile selection
  selected_profile=$(printf '%s\n' "${profile_names[@]}" | fzf --prompt="Select AWS Profile: ")
  
  # Set the selected profile to AWS_PROFILE environment variable
  export AWS_PROFILE="$selected_profile"
  
  # Optionally, print the selected profile for verification
  echo "Selected AWS Profile: $AWS_PROFILE"
}
